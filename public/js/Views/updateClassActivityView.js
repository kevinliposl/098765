
$("#form-courses").change(function(){if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{var a={appointment:$("#form-courses").val()};document.getElementById("form-student").options.length=0;document.getElementById("form-activity").options.length=0;$("#form-activity").append($("<option></option>").attr("value","-1").text("Seleccione una Actividad"));document.getElementById("form-addContent").options.length=0;$("#form-addContent").append($("<option></option>").attr("value","-1").text("Seleccione un Contenido"));document.getElementById("form-backup").options.length=0;$.post("?controller=ClassActivity&action=selectStudentClassActivity",a,function(c){$("#form-student").append($("<option></option>").attr("value","-1").text("Seleccione un Estudiante"));for(var b=0;b<c.length;b++){$("#form-student").append($("<option></option>").attr("value",c[b].identification).text(c[b].name))}$("#form-student").selectpicker("refresh")},"json")}});$("#form-student").change(function(){if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{if($("#form-student").val()==="-1"){$("#failed-form-student").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-student"));return false}else{var a={appointment:$("#form-courses").val(),identification:$("#form-student").val()};document.getElementById("form-activity").options.length=0;document.getElementById("form-addContent").options.length=0;$("#form-addContent").append($("<option></option>").attr("value","-1").text("Seleccione un Contenido"));document.getElementById("form-backup").options.length=0;$.post("?controller=ClassActivity&action=selectRecordStudentClassActivity",a,function(c){$("#form-activity").append($("<option></option>").attr("value","-1").text("Seleccione una Actividad"));for(var b=0;b<c.length;b++){$("#form-activity").append($("<option></option>").attr("value",c[b].consecutive_class).text(c[b].date))}$("#form-activity").selectpicker("refresh")},"json")}}});$("#form-activity").change(function(){if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{if($("#form-student").val()==="-1"){$("#failed-form-student").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-student"));return false}else{if($("#form-activity").val()==="-1"){$("#failed-form-activity").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-activity"));return false}else{var a={appointment:$("#form-courses").val(),identification:$("#form-student").val(),consecutive:$("#form-activity").val()};document.getElementById("form-addContent").options.length=0;document.getElementById("form-backup").options.length=0;$.post("?controller=ClassActivity&action=selectClassActivity",a,function(c){document.getElementById("form-consecutive").value=c.consecutive_class;document.getElementById("form-date").value=c.date;if(c.assistance==="P"){$("#radio_1").attr("checked","checked")}else{if(c.assistance==="I"){$("#radio_2").attr("checked","checked")}else{$("#radio_1").attr("checked","checked")}}document.getElementById("form-observation").value=c.observation;var b={appointment:$("#form-courses").val(),identification:$("#form-student").val(),consecutive:c.consecutive_class};$.post("?controller=ClassActivity&action=selectRecordContentClassActivity",b,function(e){$("#form-addContent").append($("<option></option>").attr("value","-1").text("Seleccione un Contenido"));for(var d=0;d<e.length;d++){$("#form-addContent").append($("<option></option>").attr("value",e[d].ID).text(e[d].content))}$("#form-addContent").selectpicker("refresh")},"json")},"json")}}}});$("#form-save").click(function(){var a;a=$("#form-content").val().trim();if(!isNaN(a)||a.length<4||a>255){$("#failed-content").attr("data-notify-msg","<i class=icon-remove-sign></i> Inicial de curso Incorrecta. Complete e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-content"))}else{$("#form-addContent").append($("<option></option>").attr("value",a).text(a));$("#form-addContent").selectpicker("refresh")}});$("#form-delete").click(function(){if($("#form-addContent").val()==="-1"){$("#failed-form-addContent").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-addContent"));return false}else{$("#form-backup").append($("<option></option>").attr("value",$("#form-addContent").val()).text($("#form-addContent").val()));$("#form-backup").selectpicker("refresh");var a=document.getElementById("form-addContent");a.remove(a.selectedIndex);$("#form-addContent").selectpicker("refresh")}});$("#form-submity").click(function(){var g;g=$("#form-observation").val().trim();var c=document.getElementById("form-addContent");var k="";var a=0;for(var e=0;e<c.length;e++){var b=c[e];if(e===c.length-1){if(isNaN(b.value)){k+=b.value;a+=1}}else{if(isNaN(b.value)){k+=b.value+",";a+=1}}}var d=document.getElementById("form-backup");var f="";for(var e=0;e<d.length;e++){var h=d[e];if(e===d.length-1){f+=h.value}else{f+=h.value+","}}if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{if($("#form-student").val()==="-1"){$("#failed-form-student").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-student"));return false}else{if(!isNaN(g)||g.length<4||g.length>255){$("#failed-observation").attr("data-notify-msg","<i class=icon-remove-sign></i> Inicial de curso Incorrecta. Complete e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-observation"));return false}else{var j={appointment:$("#form-courses").val(),student:$("#form-student").val(),consecutive:$("#form-consecutive").val(),date:$("#form-date").val().trim(),typeA:$("input:radio[name='form-typeA']:checked").val().trim(),contentsNew:k,countNew:a,contentsDelete:f,countDelete:d.length,observation:$("#form-observation").val()};$.post("?controller=ClassActivity&action=update",j,function(i){if(i.result==="1"){$("#success").attr({"data-notify-type":"success","data-notify-msg":"<i class=icon-ok-sign></i> Operacion Exitosa!","data-notify-position":"bottom-full-width"});SEMICOLON.widget.notifications($("#success"));setTimeout("location.href = '?controller=ClassActivity&action=update';",2000)}else{$("#warning").attr({"data-notify-type":"warning","data-notify-msg":"<i class=icon-warning-sign></i> Operacion Incompleta, intente de nuevo!","data-notify-position":"bottom-full-width"});SEMICOLON.widget.notifications($("#warning"))}},"json")}}}});