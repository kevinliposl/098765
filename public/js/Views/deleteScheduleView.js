
var days={1:"Lunes",2:"Martes",3:"Miercoles",4:"Jueves",5:"Viernes",6:"Sabado",7:"Domingo"};var colorClass={0:"info",1:"success",2:"danger",3:"warning"};function getRandomArbitrary(b,a){return Math.floor(Math.random()*(a-b))+b}$("#form-semester").change(function(){if($("#form-semester").val()!=="-1"){var c={ID_Semester:$("#form-semester").val()};SEMICOLON.widget.notifications($("#wait"));$.post("?controller=Schedule&action=select",c,function(l){if(l[0].initials){for(var f=1;f<=7;f++){for(var d=7;d<=19;d++){$("#"+days[f]+""+d).removeClass();$("#"+days[f]+""+d).text("")}}for(var h=0;h<l.length;h++){var e=getRandomArbitrary(0,3);for(var g=parseInt(l[h].start);g<=parseInt(l[h].end);g++){$("#"+l[h].day+""+g).addClass(colorClass[e]);$("#"+l[h].day+""+g).text(l[h].initials+" | "+l[h].name)}}}},"json");$.post("?controller=Schedule&action=selectWithSchedule",c,function(e){if(e[0].ID){$("#form-courses").removeAttr("disabled");$("#form-courses").empty();$("#form-courses").append($("<option></option>").attr("value",-1).text("Seleccione un Curso"));for(var d=0;d<e.length;d++){$("#form-courses").append($("<option></option>").attr("value",e[d].ID).text(e[d].initials+" | "+e[d].name))}$("#form-courses").selectpicker("refresh")}else{SEMICOLON.widget.notifications($("#warning"))}},"json")}else{for(var b=1;b<=7;b++){for(var a=7;a<=19;a++){$("#"+days[b]+""+a).removeClass();$("#"+days[b]+""+a).text("")}}$("#form-courses").attr("disabled","disabled");$("#form-courses").empty();$("#form-courses").append($("<option></option>").attr("value",-1).text("Seleccione un Curso"));$("#form-courses").selectpicker("refresh");$("#form-hour").attr("disabled","disabled");$("#form-hour").empty();$("#form-hour").append($("<option></option>").attr("value",-1).text("Seleccione un Horario"));$("#form-hour").selectpicker("refresh");return}});$("#form-courses").change(function(){if($("#form-courses").val()!=="-1"){var a={ID_appointment:$("#form-courses").val()};SEMICOLON.widget.notifications($("#wait"));$.post("?controller=Schedule&action=selectCourseSchedules",a,function(c){if(c[0].day){$("#form-hour").removeAttr("disabled");$("#form-hour").empty();$("#form-hour").append($("<option></option>").attr("value",-1).text("Seleccione un Horario"));for(var b=0;b<c.length;b++){$("#form-hour").append($("<option></option>").attr("value",c[b].ID+","+c[b].ID_schedule).text(c[b].day+" | "+c[b].start_time+":00 a "+c[b].end_time+":50."))}$("#form-hour").selectpicker("refresh")}else{SEMICOLON.widget.notifications($("#warning"))}},"json")}else{$("#form-hour").empty();$("#form-hour").append($("<option></option>").attr("value",-1).text("Seleccione un Horario"));$("#form-hour").selectpicker("refresh")}});$("#form-submit").click(function(){if($("#form-hour").val()!=="-1"){var b=$("#form-hour").val();var a=b.split(",");var d={ID:a[0],ID_schedule:a[1]};SEMICOLON.widget.notifications($("#wait"));$.post("?controller=Schedule&action=delete",d,function(e){if(e.result==="1"){$("#form-hour").find("option:selected").remove();$("#form-hour").selectpicker("refresh");SEMICOLON.widget.notifications($("#success"))}else{SEMICOLON.widget.notifications($("#warning"))}},"json");var c={ID_Semester:$("#form-semester").val()};$.post("?controller=Schedule&action=select",c,function(m){for(var g=1;g<=7;g++){for(var e=7;e<=19;e++){$("#"+days[g]+""+e).removeClass();$("#"+days[g]+""+e).text("")}}if(m[0].day){for(var l=0;l<m.length;l++){var f=getRandomArbitrary(0,3);for(var h=parseInt(m[l].start);h<=parseInt(m[l].end);h++){$("#"+m[l].day+""+h).addClass(colorClass[f]);$("#"+m[l].day+""+h).text(m[l].initials+" | "+m[l].name)}}}},"json")}});