
var totalRowNumber=1;function appendRow(c){var a=document.getElementById("bodyTable"),b=a.insertRow(a.rows.length);createCell(b.insertCell(0),a.rows.length,c,"row");createCell(b.insertCell(1),a.rows.length,"","row");b.id=totalRowNumber;totalRowNumber=totalRowNumber+1}function createCell(c,b,f,e){if(f!==""){var d=document.createElement("a");d.setAttribute("id","form-id-table-"+b);d.setAttribute("class","bt-editable");d.setAttribute("href","#form-addContent");d.setAttribute("data-type","text");d.setAttribute("data-pk","1");d.setAttribute("data-placeholder","Required");d.setAttribute("data-title"," Actualización de la Actividad");d.innerHTML=f;c.appendChild(d)}else{var d=document.createElement("a");d.setAttribute("class","button button-mini button-circle button-red");d.setAttribute("style","display : block; text-align: center;");d.setAttribute("onclick","deleteActivity("+totalRowNumber+");return false;");d.innerHTML="Eliminar";c.appendChild(d)}}function deleteActivity(a){var b=document.getElementById(a);b.parentNode.removeChild(b)}$("#form-courses").change(function(){if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{var a={appointment:$("#form-courses").val()};document.getElementById("form-student").options.length=0;SEMICOLON.widget.notifications($("#wait"));$.post("?controller=ClassActivity&action=selectStudentClassActivity",a,function(c){$("#form-student").append($("<option></option>").attr("value","-1").text("Seleccione un Estudiante"));for(var b=0;b<c.length;b++){$("#form-student").append($("<option></option>").attr("value",c[b].identification).text(c[b].name))}$("#form-student").selectpicker("refresh")},"json")}});$("#form-student").change(function(){if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{if($("#form-student").val()==="-1"){$("#failed-form-student").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-student"));return false}else{var a={appointment:$("#form-courses").val(),identification:$("#form-student").val()};$.post("?controller=ClassActivity&action=selectConsecutiveClassActivity",a,function(b){document.getElementById("form-consecutive").value=parseInt(b.consecutive_class)+1},"json")}}});$("#form-submit").click(function(){$("#form-submit").attr("data-target","#myModal")});$("#form-save").click(function(){var a;a=$("#form-content").val().trim();if(!isNaN(a)||a.length<4||a.length>255){$("#failed-content").attr("data-notify-msg","<i class=icon-remove-sign></i> Contenido Incorrecto. Complete e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-content"))}else{appendRow(a)}});$("#form-submity").click(function(){var e;e=$("#form-observation").val().trim();var g=document.getElementById("bodyTable");var d="";var a="";var f="";for(var b=1;b<g.rows.length;b++){d=g.rows[b].getElementsByTagName("td");a=d[0].getElementsByTagName("a");f+=a[0].textContent+","}f=f.substring(0,f.length-1);if($("#form-courses").val()==="-1"){$("#failed-form-courses").attr("data-notify-msg","<i class=icon-remove-sign></i> Curso inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-courses"));return false}else{if($("#form-student").val()==="-1"){$("#failed-form-student").attr("data-notify-msg","<i class=icon-remove-sign></i> Estudiante inválido. Seleccione e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-form-student"));return false}else{if(!isNaN(e)||e.length<4||e.length>255){$("#failed-observation").attr("data-notify-msg","<i class=icon-remove-sign></i> Observación Incorrecta. Complete e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-observation"))}else{if(g.rows.length<2){$("#failed-addContent").attr("data-notify-msg","<i class=icon-remove-sign></i> Cantidad de Contenidos inválidos. Complete e intente de nuevo!");SEMICOLON.widget.notifications($("#failed-addContent"))}else{var c={appointment:$("#form-courses").val(),student:$("#form-student").val(),consecutive:$("#form-consecutive").val(),date:$("#form-date").val().trim(),typeA:$("input:radio[name='form-typeA']:checked").val().trim(),contents:f,count:((g.rows.length)-1),observation:$("#form-observation").val()};SEMICOLON.widget.notifications($("#wait"));$.post("?controller=ClassActivity&action=insert",c,function(h){if(h.result==="1"){SEMICOLON.widget.notifications($("#success"));setTimeout("location.href = '?controller=ClassActivity&action=insert';",2000)}else{SEMICOLON.widget.notifications($("#warning"))}},"json")}}}}});$(document).ready(function(){$(".bt-editable").editable()});